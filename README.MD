# CalistheniApp API Documentation

## Informaci√≥n General

**CalistheniApp** es una aplicaci√≥n para encontrar y compartir ubicaciones de barras de calistenia. Los usuarios pueden:
- üìç Publicar ubicaciones de barras de ejercicio con GPS
- üì∏ Subir fotos del equipamiento  
- ‚≠ê Calificar y comentar sobre las barras
- üîç Buscar barras cercanas por ubicaci√≥n
- üí™ Encontrar el mejor equipamiento para entrenar

- **Versi√≥n**: 1.0.0
- **Base URL**: `http://localhost:3000/api/v1`
- **Documentaci√≥n Swagger**: `http://localhost:3000/api-docs`

## Autenticaci√≥n

La API utiliza autenticaci√≥n JWT (JSON Web Tokens). Para acceder a endpoints protegidos, incluye el token en el header:

```
Authorization: Bearer <tu_jwt_token>
```

## Endpoints

### üîê Autenticaci√≥n

#### Registrar Usuario
```http
POST /users/register
```

**Cuerpo de la petici√≥n:**
```json
{
  "username": "johndoe",
  "email": "john@example.com",
  "password": "Password123!",
  "confirmPassword": "Password123!"
}
```

**Respuesta (201):**
```json
{
  "message": "User created successfully",
  "user": {
    "id": "60d5ec49f1b2c8b1f8c4e5a1",
    "username": "johndoe",
    "email": "john@example.com",
    "role": "user",
    "active": true,
    "registerDate": "2023-06-25T10:30:00.000Z"
  }
}
```

#### Iniciar Sesi√≥n
```http
POST /users/login
```

**Cuerpo de la petici√≥n:**
```json
{
  "emailOrUsername": "john@example.com",
  "password": "Password123!"
}
```

**Respuesta (200):**
```json
{
  "message": "Login successful",
  "user": {
    "id": "60d5ec49f1b2c8b1f8c4e5a1",
    "username": "johndoe",
    "email": "john@example.com",
    "role": "user",
    "active": true,
    "registerDate": "2023-06-25T10:30:00.000Z"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### üë§ Gesti√≥n de Usuarios

#### Obtener Perfil Propio
```http
GET /users/profile
```
**Autenticaci√≥n:** Requerida

**Respuesta (200):**
```json
{
  "user": {
    "id": "60d5ec49f1b2c8b1f8c4e5a1",
    "username": "johndoe",
    "email": "john@example.com",
    "role": "user",
    "active": true,
    "registerDate": "2023-06-25T10:30:00.000Z"
  }
}
```

#### Actualizar Usuario
```http
PUT /users/:id
```
**Autenticaci√≥n:** Requerida (propio usuario o admin)

**Cuerpo de la petici√≥n:**
```json
{
  "newUsername": "newusername",
  "newEmail": "newemail@example.com",
  "newPassword": "NewPassword123!",
  "confirmPassword": "NewPassword123!",
  "currentPassword": "Password123!"
}
```

### üîß Administraci√≥n (Solo Admin)

#### Listar Usuarios
```http
GET /users/
```
**Autenticaci√≥n:** Requerida (Admin)

#### Obtener Usuario por ID
```http
GET /users/:id
```
**Autenticaci√≥n:** Requerida (Admin)

#### Activar Usuario
```http
PATCH /users/:id/activate
```
**Autenticaci√≥n:** Requerida (Admin)

#### Desactivar Usuario
```http
DELETE /users/:id/deactivate
```
**Autenticaci√≥n:** Requerida (Admin)

#### Crear Administrador
```http
POST /users/admin/create
```
**Autenticaci√≥n:** Requerida (Admin)

**Cuerpo de la petici√≥n:**
```json
{
  "username": "adminuser",
  "email": "admin@example.com",
  "password": "AdminPass123!"
}
```

## C√≥digos de Estado HTTP

| C√≥digo | Significado |
|--------|-------------|
| 200 | OK - Operaci√≥n exitosa |
| 201 | Created - Recurso creado exitosamente |
| 400 | Bad Request - Error de validaci√≥n |
| 401 | Unauthorized - Token ausente o inv√°lido |
| 403 | Forbidden - Acceso denegado |
| 404 | Not Found - Recurso no encontrado |
| 409 | Conflict - Conflicto (email/username ya existe) |
| 500 | Internal Server Error - Error del servidor |

## Ejemplos de Errores

### Error de Validaci√≥n (400)
```json
{
  "error": "Validation failed",
  "details": [
    {
      "field": "email",
      "message": "Please provide a valid email address"
    }
  ]
}
```

### Error de Autenticaci√≥n (401)
```json
{
  "error": "Access denied. No token provided"
}
```

### Error de Autorizaci√≥n (403)
```json
{
  "error": "Admin privileges required"
}
```

## Esquemas de Datos